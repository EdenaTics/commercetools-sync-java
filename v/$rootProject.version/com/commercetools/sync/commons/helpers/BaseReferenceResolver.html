<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_102) on Mon Aug 28 10:31:57 CEST 2017 -->
<title>BaseReferenceResolver (commercetools-sync-java 0.0.2 API)</title>
<meta name="date" content="2017-08-28">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="BaseReferenceResolver (commercetools-sync-java 0.0.2 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":9,"i2":10,"i3":9,"i4":6};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../com/commercetools/sync/commons/helpers/BaseSyncStatistics.html" title="class in com.commercetools.sync.commons.helpers"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/commercetools/sync/commons/helpers/BaseReferenceResolver.html" target="_top">Frames</a></li>
<li><a href="BaseReferenceResolver.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.commercetools.sync.commons.helpers</div>
<h2 title="Class BaseReferenceResolver" class="title">Class BaseReferenceResolver&lt;T extends io.sphere.sdk.types.CustomDraft,S extends <a href="../../../../../com/commercetools/sync/commons/BaseSyncOptions.html" title="class in com.commercetools.sync.commons">BaseSyncOptions</a>&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.commercetools.sync.commons.helpers.BaseReferenceResolver&lt;T,S&gt;</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the resource draft type for which reference resolution has to be done on.</dd>
<dd><code>S</code> - a subclass implementation of <a href="../../../../../com/commercetools/sync/commons/BaseSyncOptions.html" title="class in com.commercetools.sync.commons"><code>BaseSyncOptions</code></a> that is used to allow/deny some specific options,
            specified by the user, on reference resolution.</dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../../com/commercetools/sync/categories/helpers/CategoryReferenceResolver.html" title="class in com.commercetools.sync.categories.helpers">CategoryReferenceResolver</a>, <a href="../../../../../com/commercetools/sync/inventories/helpers/InventoryReferenceResolver.html" title="class in com.commercetools.sync.inventories.helpers">InventoryReferenceResolver</a></dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="typeNameLabel">BaseReferenceResolver&lt;T extends io.sphere.sdk.types.CustomDraft,S extends <a href="../../../../../com/commercetools/sync/commons/BaseSyncOptions.html" title="class in com.commercetools.sync.commons">BaseSyncOptions</a>&gt;</span>
extends java.lang.Object</pre>
<div class="block">This class is responsible for providing an abstract implementation of reference resolution on different CTP
 resources. For concrete reference resolution implementation of the CTP resources, this class should be extended.
 It also provides utility methods that facilitate the reference resolution process.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected </code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/commercetools/sync/commons/helpers/BaseReferenceResolver.html#BaseReferenceResolver-S-com.commercetools.sync.services.TypeService-">BaseReferenceResolver</a></span>(<a href="../../../../../com/commercetools/sync/commons/helpers/BaseReferenceResolver.html" title="type parameter in BaseReferenceResolver">S</a>&nbsp;options,
                     <a href="../../../../../com/commercetools/sync/services/TypeService.html" title="interface in com.commercetools.sync.services">TypeService</a>&nbsp;typeService)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected java.util.concurrent.CompletionStage&lt;java.util.Optional&lt;java.lang.String&gt;&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/commercetools/sync/commons/helpers/BaseReferenceResolver.html#getCustomTypeId-io.sphere.sdk.types.CustomFieldsDraft-java.lang.String-">getCustomTypeId</a></span>(io.sphere.sdk.types.CustomFieldsDraft&nbsp;custom,
               java.lang.String&nbsp;referenceResolutionErrorMessage)</code>
<div class="block">Given a custom fields object this method fetches the custom type reference id.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/commercetools/sync/commons/helpers/BaseReferenceResolver.html#getKeyFromExpansionOrReference-boolean-java.lang.String-io.sphere.sdk.models.Reference-">getKeyFromExpansionOrReference</a></span>(boolean&nbsp;shouldAllowUuidKeys,
                              java.lang.String&nbsp;keyFromExpansion,
                              io.sphere.sdk.models.Reference&nbsp;reference)</code>
<div class="block">Given a key value (<code>keyFromExpansion</code>) which is potentially fetched from the expansion of a reference.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../com/commercetools/sync/commons/helpers/BaseReferenceResolver.html" title="type parameter in BaseReferenceResolver">S</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/commercetools/sync/commons/helpers/BaseReferenceResolver.html#getOptions--">getOptions</a></span>()</code>
<div class="block">Returns the <code>S</code>, which is a subclass of <a href="../../../../../com/commercetools/sync/commons/BaseSyncOptions.html" title="class in com.commercetools.sync.commons"><code>BaseSyncOptions</code></a>, instance of <code>this</code> instance.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/commercetools/sync/commons/helpers/BaseReferenceResolver.html#isReferenceExpanded-io.sphere.sdk.models.Reference-">isReferenceExpanded</a></span>(io.sphere.sdk.models.Reference&nbsp;reference)</code>
<div class="block">Helper method to check if passed <code>Reference</code> instance is expanded.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>protected abstract java.util.concurrent.CompletionStage&lt;<a href="../../../../../com/commercetools/sync/commons/helpers/BaseReferenceResolver.html" title="type parameter in BaseReferenceResolver">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/commercetools/sync/commons/helpers/BaseReferenceResolver.html#resolveCustomTypeReference-T-">resolveCustomTypeReference</a></span>(<a href="../../../../../com/commercetools/sync/commons/helpers/BaseReferenceResolver.html" title="type parameter in BaseReferenceResolver">T</a>&nbsp;draft)</code>
<div class="block">Given a draft of <code>T</code> (e.g.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="BaseReferenceResolver-com.commercetools.sync.commons.BaseSyncOptions-com.commercetools.sync.services.TypeService-">
<!--   -->
</a><a name="BaseReferenceResolver-S-com.commercetools.sync.services.TypeService-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BaseReferenceResolver</h4>
<pre>protected&nbsp;BaseReferenceResolver(@Nonnull
                                <a href="../../../../../com/commercetools/sync/commons/helpers/BaseReferenceResolver.html" title="type parameter in BaseReferenceResolver">S</a>&nbsp;options,
                                @Nonnull
                                <a href="../../../../../com/commercetools/sync/services/TypeService.html" title="interface in com.commercetools.sync.services">TypeService</a>&nbsp;typeService)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getOptions--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOptions</h4>
<pre>protected&nbsp;<a href="../../../../../com/commercetools/sync/commons/helpers/BaseReferenceResolver.html" title="type parameter in BaseReferenceResolver">S</a>&nbsp;getOptions()</pre>
<div class="block">Returns the <code>S</code>, which is a subclass of <a href="../../../../../com/commercetools/sync/commons/BaseSyncOptions.html" title="class in com.commercetools.sync.commons"><code>BaseSyncOptions</code></a>, instance of <code>this</code> instance.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the <code>S</code>, which is a subclass of <a href="../../../../../com/commercetools/sync/commons/BaseSyncOptions.html" title="class in com.commercetools.sync.commons"><code>BaseSyncOptions</code></a>, instance of <code>this</code> instance.</dd>
</dl>
</li>
</ul>
<a name="resolveCustomTypeReference-io.sphere.sdk.types.CustomDraft-">
<!--   -->
</a><a name="resolveCustomTypeReference-T-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resolveCustomTypeReference</h4>
<pre>protected abstract&nbsp;java.util.concurrent.CompletionStage&lt;<a href="../../../../../com/commercetools/sync/commons/helpers/BaseReferenceResolver.html" title="type parameter in BaseReferenceResolver">T</a>&gt;&nbsp;resolveCustomTypeReference(@Nonnull
                                                                                      <a href="../../../../../com/commercetools/sync/commons/helpers/BaseReferenceResolver.html" title="type parameter in BaseReferenceResolver">T</a>&nbsp;draft)</pre>
<div class="block">Given a draft of <code>T</code> (e.g. <code>CategoryDraft</code>) this method attempts to resolve it's custom type
 reference to return <code>CompletionStage</code> which contains a new instance of the draft with the resolved
 custom type reference. The key of the custom type is taken from the from the id field of the reference.

 <p>The method then tries to fetch the key of the custom type, optimistically from a
 cache. If the key is is not found, the resultant draft would remain exactly the same as the passed
 draft (without a custom type reference resolution).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>draft</code> - the draft to resolve it's references.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a <code>CompletionStage</code> that contains as a result a new draft instance with resolved custom
      type references or, in case an error occurs during reference resolution,
      a <a href="../../../../../com/commercetools/sync/commons/exceptions/ReferenceResolutionException.html" title="class in com.commercetools.sync.commons.exceptions"><code>ReferenceResolutionException</code></a>.</dd>
</dl>
</li>
</ul>
<a name="getCustomTypeId-io.sphere.sdk.types.CustomFieldsDraft-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCustomTypeId</h4>
<pre>protected&nbsp;java.util.concurrent.CompletionStage&lt;java.util.Optional&lt;java.lang.String&gt;&gt;&nbsp;getCustomTypeId(@Nonnull
                                                                                                     io.sphere.sdk.types.CustomFieldsDraft&nbsp;custom,
                                                                                                     @Nonnull
                                                                                                     java.lang.String&nbsp;referenceResolutionErrorMessage)</pre>
<div class="block">Given a custom fields object this method fetches the custom type reference id.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>custom</code> - the custom fields object.</dd>
<dd><code>referenceResolutionErrorMessage</code> - the message containing the information about the draft to attach to the
                                        <a href="../../../../../com/commercetools/sync/commons/exceptions/ReferenceResolutionException.html" title="class in com.commercetools.sync.commons.exceptions"><code>ReferenceResolutionException</code></a> in case it occurs.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a <code>CompletionStage</code> that contains as a result an optional which either contains the custom type id
      if it exists or empty if it doesn't.</dd>
</dl>
</li>
</ul>
<a name="getKeyFromExpansionOrReference-boolean-java.lang.String-io.sphere.sdk.models.Reference-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getKeyFromExpansionOrReference</h4>
<pre>@Nonnull
protected static&nbsp;java.lang.String&nbsp;getKeyFromExpansionOrReference(boolean&nbsp;shouldAllowUuidKeys,
                                                                          @Nullable
                                                                          java.lang.String&nbsp;keyFromExpansion,
                                                                          @Nonnull
                                                                          io.sphere.sdk.models.Reference&nbsp;reference)
                                                                   throws <a href="../../../../../com/commercetools/sync/commons/exceptions/ReferenceResolutionException.html" title="class in com.commercetools.sync.commons.exceptions">ReferenceResolutionException</a></pre>
<div class="block">Given a key value (<code>keyFromExpansion</code>) which is potentially fetched from the expansion of a reference. This
 method checks if this value is not blank (empty string/null), if it is, it tries to fetch the key value from the
 id field on the reference. If it's not blank it returns it. Whether the value is fetched from the expansion or
 from the reference's id field, this method makes sure the key is valid:
 <ol>
     <li>is not blank (empty/null).</li>
     <li>can only have a UUID format if allowed by the <code>options</code> instance of this class.</li>
 </ol>
 If the key is not valid a <a href="../../../../../com/commercetools/sync/commons/exceptions/ReferenceResolutionException.html" title="class in com.commercetools.sync.commons.exceptions"><code>ReferenceResolutionException</code></a> will be thrown.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>shouldAllowUuidKeys</code> - flag that signals whether the key could be UUID format or not.</dd>
<dd><code>keyFromExpansion</code> - the key value fetched after expansion of the <code>reference</code>.</dd>
<dd><code>reference</code> - the reference object to get the key from.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the key of the referenced object.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../com/commercetools/sync/commons/exceptions/ReferenceResolutionException.html" title="class in com.commercetools.sync.commons.exceptions">ReferenceResolutionException</a></code> - thrown if the key is not valid.</dd>
</dl>
</li>
</ul>
<a name="isReferenceExpanded-io.sphere.sdk.models.Reference-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>isReferenceExpanded</h4>
<pre>protected static&nbsp;boolean&nbsp;isReferenceExpanded(@Nonnull
                                             io.sphere.sdk.models.Reference&nbsp;reference)</pre>
<div class="block">Helper method to check if passed <code>Reference</code> instance is expanded.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>reference</code> - the reference to check.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the <code>Reference</code> is expanded.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../com/commercetools/sync/commons/helpers/BaseSyncStatistics.html" title="class in com.commercetools.sync.commons.helpers"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/commercetools/sync/commons/helpers/BaseReferenceResolver.html" target="_top">Frames</a></li>
<li><a href="BaseReferenceResolver.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
