sudo: false
addons:
  apt:
    packages:
    - oracle-java8-installer
  sonarcloud:
    organization: "heshammassoud-github"
    token:
      secure: mYl9cdNnKsuilJxJiH1c7r6Bn5B2nXiuC9ywkvJthO2DpRLoV0L2EXFR0EcrA3VBlaPLXxYnG6oMiVrdDBGC27nqK3hFogWsGLt8BVYn31qksAD0GDR37bMXeoUiH9bk944EcJ/xrxmNhGdRJUK1Ul5bAx0jAF/2duQTIII2RlsysUGyBxvON0fBAu2pLRLqpM2fKpPMiuAfprbq4MzRLataSnGAGdZL1eavcvUJ9jLqrgxJVWKV5xRwjUBPJNtDapF64T1Mqdqg4okiwFytMj2tQlGV5I4+33LlVeWtYv6Qt86WYeWghbNJnsN1yjqguVZqL46lYTU9sg5fDRB852QvOUwdrDZ+j7Iy0QuAaUndgLx+zd3ETHw6jgx4VOqJ4q9mkPFeP7tx9or2BJUAibE0jg4jJq6tgRYFw8oRbeDVagrILrV2deX4TC0ZjqS+3cTAf1Kt6vf/40ynhyvpdKEWyejGsMWgQiTg5SGMqOeNxvjWgy1bHzGL6IXAvxVicfFrYMX9buwjJMYD9c6BJ2Y/QCUQMNiLELCuq8/DTdvqZCxbuubHWA5lJPd3iNiwVoYSI8yeJzzURvaCHiqEEH7TvUl3ktniGUa6WQbydHMfNd+b/uNN6l0w9YkBWRj36eTzsT74SQaBhbrVZ0YodFt5wMivdJbQmv4oSMxj3mI=
    github_token:
      secure: OMn01T6ATuBKrmYsBdn81KwcER3scJfIJmhFFT2yzM4F5O21WrMeunlWmAsedOKEeSebvCLHb5axqS1v92/RJnl4vnW0Sh1hQ6t3nKMHcmx+CfKp6kSvAjfV2bJiaBDjPLoBlRjrntNtVASIi/GGnhq1hzfwa/Ck4MHToDlM744BSb4lGoTpUeRTEkeJ27l9ssI6Jk8Y5k6zIpz9A4IrgaECPYJ4Gkn4ubhPXcEZRXGSDora6oN+h4qcDivfWP1v6YB+UbWe7PI2eH+tO8sNjdyuoha3X760x7Jbf2PYo17IFQesVtWoflKp0sO/MfnilN90uRBs4KvBdG7GQsBJV5kJq5LO9kuFb91jPMZFCNEDjFVJOdKiMZZ/wL9w4veq3NsmSrrjsQL2Skq288/X467MHkdrZRosYpbJdvsd5Yrp2bazC4YLGXEV2Jh6NLOWHB1COuCOFe3ipZ9mFbHPj/79m05omFDqnsrAh+udNqCJC46TI+SiWCbkP1OqAivPGti+ICD53dNyjieAxP1ocy3bJpSgqZT5OUh+COn07fprfIv3Wjg4qBUmYgIKwjwuzMrzTr/TXIMt8h5aH0I/cASss8qxyQ1AHmwv8cM2tNkOeCdV6OUkwQI0Ncgl01tDBtJ3rqyk3Q/toF61pNjEVa3nKShsfmcJ0h7BNcLdP50=
script:
  - sonar-scanner
language: java
dist: trusty
jdk:
- openjdk8
install: true # skips travis' default installation step which executes gradle assemble.
script: ./gradlew clean build
# The before_cache and the cache steps cache the gradle installation on travis.
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - $HOME/.gradle/caches/
  - $HOME/.gradle/wrapper/
after_success:
- bash <(curl -s https://codecov.io/bash)
- ./travis-publish.sh || travis_terminate 1
notifications:
  hipchat:
    template:
    - '<b><a href="https://github.com/commercetools/commercetools-sync-java">%{repository}</a></b>
    #<a href="%{build_url}">%{build_number}</a>
    <br>(%{branch} - <a href="%{compare_url}">%{commit}</a> : %{author}): <b>%{message}</b>
      <br><b>Build duration:</b> %{duration}.'
    format: html
    on_pull_requests: false
    on_success: change
    on_failure: always
    rooms:
      secure: GamqCH6vg3VJJ8XypH+QvDtlfK8H3z+jhNswp4G1l4TLkkDIBwEC5Iu8GwQm3TjrgrNYGGNAtgcFrDNOJzDdQtsrYv7NyvJnHXzznX4kzjrIa8o+NmYpxw07s7g/2kzcRTzvOC7KvGz++a0BDMLa2Di/0UVM/Q12BFli0JuDxoVEzcD7ubqcv2MjEIjJcDRf7wrx4QPMcTZIvPPBC6Z/h7lU0WnQHeEj5qb3Uim4Z0qdzRgjxSM++37cCsiFxcV85ff0e9BmTeV2sdmS/GmCTY8bJ/FwH1ZuLUhbvwlOikHMJqvVxkeqeDto0p/sECn0tMkdS3dwx/T8L9G4YUHlL4N46khnNLZYISqUk36ncW+lGxe5sQU+kRL9Yv0Lk5BIB3vw00XMpIoKz+lsN7mgkTCyfeMM5+jgFk7gEnR/PtVulO2XIj1xwskip+EnyEZR7G+qzeGGPSMTJs2LzoEWYKwCh2aAQjYOLX4H3Gt6mhHkB4qIR51m2PINQYhQE/WXKGnJ4c+wOHavRo7foSYyWnB7CnyNkZZofqYqlTCQkIumkJ3vTGQmu+rkRSJ+NXoY6h1w0Bzz6GktCVofWd3Yg6h3eZ3Ge2HV73VCsyuPn72BZ4d+8/zpm6cGvLEJ6UnSbzDUrVHybaaAXaJcWYvKL6yVsWjXRR93EVKEp4ajdMs=
