<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Bar Chart</title>
    <script src="Chart.bundle.js"></script>
    <style type="text/css">
        @-webkit-keyframes chartjs-render-animation {
            from {
                opacity: 0.99
            }
            to {
                opacity: 1
            }
        }

        @keyframes chartjs-render-animation {
            from {
                opacity: 0.99
            }
            to {
                opacity: 1
            }
        }

        .chartjs-render-monitor {
            -webkit-animation: chartjs-render-animation 0.001s;
            animation: chartjs-render-animation 0.001s;
        }
    </style>
    <script src="utils.js"></script>
    <style>
        canvas {
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
        }
    </style>
</head>

<body cz-shortcut-listen="true">
<div id="container" style="width: 75%;">
    <div class="chartjs-size-monitor"
         style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;">
        <div class="chartjs-size-monitor-expand"
             style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
            <div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div>
        </div>
        <div class="chartjs-size-monitor-shrink"
             style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
            <div style="position:absolute;width:200%;height:200%;left:0; top:0"></div>
        </div>
    </div>
    <canvas id="canvas" width="1428" height="714" class="chartjs-render-monitor"
            style="display: block; width: 1428px; height: 714px;"></canvas>
</div>


<script>
    var color = Chart.helpers.color;
    var productSyncCreatesOnly = {
        label: 'Product Sync (creates only)',
        backgroundColor: color(window.chartColors.yellow).alpha(0.5).rgbString(),
        borderColor: window.chartColors.yellow,
        borderWidth: 1,
        data: []
    }
    var productSyncUpdatesOnly = {
        label: 'Product Sync (updates only)',
        backgroundColor: color(window.chartColors.green).alpha(0.5).rgbString(),
        borderColor: window.chartColors.green,
        borderWidth: 1,
        data: []
    }
    var productSyncCreatesUpdates = {
        label: 'Product Sync (creates and updates)',
        backgroundColor: color(window.chartColors.orange).alpha(0.5).rgbString(),
        borderColor: window.chartColors.orange,
        borderWidth: 1,
        data: []
    }
    var categorySyncCreatesOnly = {
        label: 'Category Sync (creates only)',
        backgroundColor: color(window.chartColors.red).alpha(0.5).rgbString(),
        borderColor: window.chartColors.red,
        borderWidth: 1,
        data: []
    }
    var categorySyncUpdatesOnly = {
        label: 'Category Sync (updates only)',
        backgroundColor: color(window.chartColors.blue).alpha(0.5).rgbString(),
        borderColor: window.chartColors.blue,
        borderWidth: 1,
        data: []
    }
    var categorySyncCreatesUpdates = {
        label: 'Category Sync (creates and updates)',
        backgroundColor: color(window.chartColors.grey).alpha(0.5).rgbString(),
        borderColor: window.chartColors.grey,
        borderWidth: 1,
        data: []
    }
    var inventorySyncCreatesOnly = {
        label: 'Inventory Sync (creates only)',
        backgroundColor: color(window.chartColors.purple).alpha(0.5).rgbString(),
        borderColor: window.chartColors.purple,
        borderWidth: 1,
        data: []
    }
    var inventorySyncUpdatesOnly = {
        label: 'Inventory Sync (updates only)',
        backgroundColor: color(window.chartColors.black).alpha(0.5).rgbString(),
        borderColor: window.chartColors.black,
        borderWidth: 1,
        data: []
    }
    var inventorySyncCreatesUpdates = {
        label: 'Inventory Sync (creates and updates)',
        backgroundColor: color(window.chartColors.red).alpha(0.9).rgbString(),
        borderColor: window.chartColors.red,
        borderWidth: 1,
        data: []
    }


    var barChartData = {
        labels: [],
        datasets: [
            productSyncCreatesOnly,
            productSyncUpdatesOnly,
            productSyncCreatesUpdates,
            categorySyncCreatesOnly,
            categorySyncUpdatesOnly,
            categorySyncCreatesUpdates,
            inventorySyncCreatesOnly,
            inventorySyncUpdatesOnly,
            inventorySyncCreatesUpdates,
        ]

    };

    window.onload = function () {
        var ctx = document.getElementById("canvas").getContext("2d");
        window.myBar = new Chart(ctx, {
            type: 'bar',
            data: barChartData,
            options: {
                responsive: true,
                legend: {
                    position: 'top',
                },
                title: {
                    display: true,
                    text: 'Benchmark Results'
                }
            }
        });

        function addData(data) {
            $.each(data, function (key, val) {
                barChartData.labels.push(key);
                productSyncCreatesOnly.data.push(val.productSync.createsOnly.average / 1000)
                productSyncUpdatesOnly.data.push(val.productSync.updatesOnly.average / 1000)
                productSyncCreatesUpdates.data.push(val.productSync.mix.average / 1000)
                categorySyncCreatesOnly.data.push(val.categorySync.createsOnly.average / 1000)
                categorySyncUpdatesOnly.data.push(val.categorySync.updatesOnly.average / 1000)
                categorySyncCreatesUpdates.data.push(val.categorySync.mix.average / 1000)
                inventorySyncCreatesOnly.data.push(val.inventorySync.createsOnly.average / 1000)
                inventorySyncUpdatesOnly.data.push(val.inventorySync.updatesOnly.average / 1000)
                inventorySyncCreatesUpdates.data.push(val.inventorySync.mix.average / 1000)
            });
            window.myBar.update();
        }


        $.getJSON("https://commercetools.github.io/commercetools-sync-java/benchmarks.json", addData);

    };
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

</div>
</body>
</html>